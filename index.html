<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>
    <h1>Mahmud</h1>
    <form action="/addProduct" method="post" class="container">
        <input type="text" placeholder="name" name="name">
        <input type="number" placeholder="price" name="price">
        <input type="text" placeholder="method" name="method">
        <input type="number" placeholder="quantity" name="quantity">
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
    <div id="array-container"></div>


    <script>
        let product = [];


        const dataUrl = '/product';

        // Function to fetch data and display it
        async function fetchDataAndDisplay() {
            try {
                const response = await fetch(dataUrl);
                const data = await response.json();

                // Get the container element
                const container = document.getElementById('array-container');

                // Iterate through the data and create a div for each object
                data.forEach(item => {
                    const itemDiv = document.createElement('div');
                    itemDiv.innerHTML = `<strong>Name:</strong> ${item.name} <br> <strong>Color:</strong> ${item.price} 
            <button class='btn btn-danger' onclick='deleteItems("${item._id}")'> Delete </button>  <button class='btn btn-primary' onclick='updateItems("${item._id}")'> Select </button>`;
                    itemDiv.style.marginBottom = '10px'; // Optional: Adds some space between items
                    container.appendChild(itemDiv);
                });
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }
        // Fetch data and display it when the page loads
        
        const deleteItems = (id) => {
            fetch(`/delete/${id}`, {
                method: 'DELETE'
            })
            .then(res => res.json())
            .then(result => {
                
                console.log( result)
            })
        }
        const updateItems = (id) => {
            fetch(`/product/${id}`)
            .then(res=> res.json())
            .then(data => {
                console.log(data)
            })
        }
        window.onload = fetchDataAndDisplay;
    </script>
</body>

</html>